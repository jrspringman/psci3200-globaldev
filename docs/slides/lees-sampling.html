<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>PSCI 3200 – lees-sampling</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../html/custom.scss">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">PSCI 3200</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../syllabus.html" rel="" target="">
 <span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../schedule.html" rel="" target="">
 <span class="menu-text">Schedule</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#resources" id="toc-resources" class="nav-link active" data-scroll-target="#resources">Resources</a></li>
  <li><a href="#inferring-population-characteristics" id="toc-inferring-population-characteristics" class="nav-link" data-scroll-target="#inferring-population-characteristics">Inferring Population Characteristics</a></li>
  <li><a href="#sample-size-and-variance" id="toc-sample-size-and-variance" class="nav-link" data-scroll-target="#sample-size-and-variance">Sample Size and Variance</a></li>
  <li><a href="#getting-a-representative-samples" id="toc-getting-a-representative-samples" class="nav-link" data-scroll-target="#getting-a-representative-samples">Getting a Representative Samples</a></li>
  <li><a href="#sampling-strategies" id="toc-sampling-strategies" class="nav-link" data-scroll-target="#sampling-strategies">Sampling Strategies</a></li>
  <li><a href="#simple-random-sampling" id="toc-simple-random-sampling" class="nav-link" data-scroll-target="#simple-random-sampling">Simple Random Sampling</a></li>
  <li><a href="#stratified-sampling" id="toc-stratified-sampling" class="nav-link" data-scroll-target="#stratified-sampling">Stratified sampling</a></li>
  <li><a href="#non-response-bias" id="toc-non-response-bias" class="nav-link" data-scroll-target="#non-response-bias">Non-Response Bias</a></li>
  <li><a href="#dealing-with-non-response" id="toc-dealing-with-non-response" class="nav-link" data-scroll-target="#dealing-with-non-response">Dealing with Non-Response</a></li>
  <li><a href="#quiz-questions" id="toc-quiz-questions" class="nav-link" data-scroll-target="#quiz-questions">Quiz Questions</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">



<section id="resources" class="level2">
<h2 class="anchored" data-anchor-id="resources">Resources</h2>
<p>This activity draws on two sources:</p>
<ul>
<li>Chapter 3 in <a href="https://press.princeton.edu/books/paperback/9780691199436/data-analysis-for-social-science">Data Analysis for Social Science: A Friendly and Practical Introduction (DSS)</a>
<ul>
<li><a href="https://ellaudet.iq.harvard.edu/random_sampling">interactive visualization: sampling</a></li>
</ul></li>
<li><a href="https://moderndive.com/7-sampling.html#sampling">Chapter 7 in Modern Dive</a></li>
</ul>
<div class="notes">
<p>This tutorial draws heavily on two resources. An online copy of the DSS textbook chapter can be purchased at the Princeton Press website. Modern Dive is a free, open-source textbook created with R + Markdown and hosted in Github pages.</p>
</div>
</section>
<section id="inferring-population-characteristics" class="level2">
<h2 class="anchored" data-anchor-id="inferring-population-characteristics">Inferring Population Characteristics</h2>
<ul>
<li>We often want to <em>describe</em> a population of interest
<ul>
<li>What is the average number of years of education completed by a country’s citizens?</li>
<li>What share the teachers in a district receive their salary on time?</li>
</ul></li>
<li>We usually can’t collect data on the entire population</li>
<li>Sampling allows us to estimate population characteristics from a <em>subset</em> of the population</li>
<li>Random sampling makes it most likely that our sample is <em>representative</em> of the population</li>
</ul>
<div class="notes">
<p>One common goal of research is to make inferences about the characteristics of a broader population. - For example, we might want to know the average number of years of education completed by a country’s citizens - Or we might want to know what share of the teachers in a district received salary payments on-time. - However, it is extremely rare that we can collect data on the entire population. Collecting data from every member of the population is extremely expensive and logistically very difficult. This is why most countries only collect census data on their citizens once every 10 years. - Fortunately, this doesn’t mean that we can’t get good answers to these questions. Sampling allows us to estimate these quantities of interest by collecting data on a subset of the population of interest. - The method of sampling and the size of our sample determine how reliable this estimate will be. - Random sampling allows us to assume that the units in our sample (people, teachers, etc) will be a good representation of the full population</p>
</div>
</section>
<section id="sample-size-and-variance" class="level2">
<h2 class="anchored" data-anchor-id="sample-size-and-variance">Sample Size and Variance</h2>
<ul>
<li>Random samples are used to calculate “point estimates” of population parameters (mean, median, proportion, etc.)</li>
<li>Large samples have a higher chance of resembling the population, and allow us to more confident in our estimates
<ul>
<li><a href="https://ellaudet.iq.harvard.edu/random_sampling">Check out this interactive visualization</a></li>
<li>Observe how increases in sample size lead to a sample that is more and more similar to the population</li>
</ul></li>
<li>Sampling variation means that any specific sample will have a parameter value that is above or below the value in the population
<ul>
<li>Calculate the <em>standard error</em> to quantify how far your estimate is likely to be from the true parameter value</li>
</ul></li>
</ul>
<div class="notes">
<p>Random samples are used to calculate “point estimates” of parameters (mean, median, proportion, etc.). With a large sample size, it is more likely that your sample will resemble the broader population on the parameter value you are trying to estimate. In a new tab, open this interactive visualization of how sample size leads to better estimates of population parameters. Follow the instructions to watch how increases in sample size lead to a sample that is more and more similar to the population. Random samples exhibit natural “sampling variation” that leads to any specific sample to have a parameter value that is above or below the true value of the parameter in the population that you are trying to infer from the sample. You can calculate an approximation of the <em>standard error</em> to quantify how far your estimate is likely to be from the true parameter value based on the amount of variation in the data and the sample size.</p>
</div>
</section>
<section id="getting-a-representative-samples" class="level2">
<h2 class="anchored" data-anchor-id="getting-a-representative-samples">Getting a Representative Samples</h2>
<ul>
<li>Sampling frame: Comprehensive list of units in the population
<ul>
<li>Population census, administrative records</li>
<li>Create yourself on-the-ground</li>
</ul></li>
<li>Multi-stage sampling
<ul>
<li>Populations are often nested within multiple units (citizens are in neighborhoods, citizens, districts)</li>
<li>Randomly sampling which higher-level units to target can make randomly selecting individual units much easier</li>
</ul></li>
</ul>
<div class="notes">
<p>In order to draw a random sample from a population, you must have a “sampling frame”. A sampling frame is a comprehensive list of every unit in the population. If your population of interest is the citizens of a country, you may be able to get a sampling frame through a census or through government records. If a recent census or administrative records aren’t available, you might need to construct a sampling frame yourself. - In development research, we often mix these two approaches in multi-stage sampling. For example, to collect a random sample of citizens in a specific city to complete a survey, you might first randomly sample neighborhoods from government records and then work with community leaders in each neighborhood to create a list of every household from which you can draw a random sample.</p>
</div>
</section>
<section id="sampling-strategies" class="level2">
<h2 class="anchored" data-anchor-id="sampling-strategies">Sampling Strategies</h2>
<ul>
<li>Probability sampling strategies:
<ul>
<li>Simple random sampling</li>
<li>Stratified sampling</li>
</ul></li>
<li>Assume that unit and item non-response are effectively random</li>
</ul>
<div class="notes">
<p>Probability sampling is a method used in statistical research to select a sample of elements from a larger population in such a way that each element has a known, non-zero chance of being selected. This approach allows the results from the sample to be generalized to the larger population, which is a key aspect of statistical inference. There are multiple approaches to random sampling, which we will discuss below. However, they all assume that your data collection is perfect, meaning that you are able to successfull collect data from every unit that is selected to be included in the sample. In the real world, this is almost never the case. We will return to issues of non-response at the end of this activity.</p>
</div>
</section>
<section id="simple-random-sampling" class="level2">
<h2 class="anchored" data-anchor-id="simple-random-sampling">Simple Random Sampling</h2>
<ul>
<li>Each unit within the population has the same probability of being chosen</li>
<li>Can be logistically difficult</li>
<li>May lead to the exclusion of small but important groups within the population</li>
</ul>
<div class="notes">
<p>Simple Random Sampling is the most straightforward approach. In SRS, each unit within the population has the exact some probability of being included in your sample. However, it is often logistically difficult to collect data in this manner. For example, if you randomly select citizens from the entire population to answer an in-person survey, you will probably need to send an enumerator to a different part of the country for every citizen (unless you randomly sample multiple respondents that live near one another by chance). Also, SRS can miss small but important groups within the population. If you want to make inferences about parameter values for subgroups within the population, such as citizens living in a specific region of the country, you may need a more sophisticated approach to random sampling.</p>
</div>
</section>
<section id="stratified-sampling" class="level2">
<h2 class="anchored" data-anchor-id="stratified-sampling">Stratified sampling</h2>
<div class="incremental">
<ul class="incremental">
<li>Allows for more precise estimates of small group characteristics</li>
<li>Divide the entire population into <em>homogeneous</em> strata
<ul class="incremental">
<li>Ex. Gender, geographic location, etc.</li>
</ul></li>
<li>Randomly sample units from each stratum
<ul class="incremental">
<li>Decreases risk that certain strata will be absent or under-represented</li>
<li>Number of units sampled can be constant across strata or proportional to the strata’s size</li>
<li>If units are not sampled according to their proportion of the population, estimating population parameters requires weighting</li>
</ul></li>
</ul>
</div>
<div class="notes">
<p>Stratified sampling provides a more nuanced approach to random sampling. This approach can help to ensure that we collect enough data about various groups within the population so that we can make inferences about those groups. Here, we begin by dividing the population into groups of similar units, for example by gender or geographic location. We then randomly sample a certain number of units from within those strata. This decreases the risk that members of certain strata will be absent or under-represented in your sample. The number of units sampled from each strata can be constant across strata (will will lead small groups to be over-represented or over-sampled compared to their share of the broader population) or proportional to their share of the broader population. If the number of units from each strata does not correspond to that strata’s share of the population, you must apply weights when estimating the value of population parameters. It is important to note that, in order to perform stratified sampling, you must have data on which strata each unit belongs to in your sample frame.</p>
</div>
<!-- ## Cluster sampling -->
<!-- ::: {.incremental} -->
<!-- - Divide population into *heterogeneous* clusters  -->
<!-- - Take random sample of clusters -->
<!--   + Decreases costs of sampling -->
<!--   + Ex. Districts, schools, businesses -->
<!-- ::: -->
<!-- :::{.notes} -->
<!-- ::: -->
</section>
<section id="non-response-bias" class="level2">
<h2 class="anchored" data-anchor-id="non-response-bias">Non-Response Bias</h2>
<ul>
<li>Unit non-response (no data)
<ul>
<li>When you cannot get data on certain units that were selected to be included in your sample</li>
<li>Ex. A citizen declines to take your survey</li>
</ul></li>
<li>Item non-response (missing data)
<ul>
<li>When you cannot get data on all relevant characteristics of a unit that is included in your sample</li>
<li>A survey respondent chooses not to answer specific questions</li>
</ul></li>
<li>Selection into sample can bias estimates, induce spurious relationships</li>
</ul>
<div class="notes">
<p>Random sampling ensures that the statistically most likely outcome is that our sample is representative of the broader population - However, non-response can introduce bias that makes the sample less representative - Random sampling works because no characteristics of units makes them more or less likely to be included in the sample - Statistically, the most likely outcome is that the sample resembles the population at large - When citizens refuse to take a survey (unit non-response) or answer certain questions (item non-response), or administrators at a certain school are unwilling to provide data on teacher payments (unit non-response) or have incomplete records for some teachers (item non-response), this can create bias. Citizens with more years of education may be less likely to respond, or schools with worse records of on-time payments might be less able to provide accurate data. - If the characteristics that make units select whether to be included are also correlated with the population characteristic that you want to estimate, this creates bias. - This introduces what we call “selection bias,” meaning that sampling is no longer random because certain units select whether to be included in the sample - All data collection suffers from selection bias, so it is important to think carefully about how the specific types of bias you encountered might affect your estimates of population characteristics.</p>
</div>
</section>
<section id="dealing-with-non-response" class="level2">
<h2 class="anchored" data-anchor-id="dealing-with-non-response">Dealing with Non-Response</h2>
<ul>
<li>Unit non-response (no data)
<ul>
<li>Incentives</li>
<li>Fancy weighting</li>
</ul></li>
<li>Item non-response (missing data)
<ul>
<li>Self-administration</li>
</ul></li>
<li>Always look at the distribution of non-response before making inferences with your data</li>
</ul>
<div class="notes">
<p>There are many strategies to reduce the threats to inference posed by non-response. To reduce unit non-response, you can offer incentives or apply weighting to try to account for higher levels of non-response among certain types of units. To reduce item non-response, you can allow individual surveys to be self-administered or emphasize anonymity to reduce hesitation to sharing information. However, none of these strategies are guaranteed to work, so it is always important to investigate patterns in both unit and item non-response in your sample. Investigate whether sampled units in certain areas or strata were less likely to provide data than others, or whether certain types of units were less likely to provide certain types of data or information.</p>
</div>
</section>
<section id="quiz-questions" class="level2">
<h2 class="anchored" data-anchor-id="quiz-questions">Quiz Questions</h2>
<ul>
<li>Which method would be a more reliable way to estimate the proportion of citizens in your country that support a specific policy?
<ul>
<li>Asking 100 citizens selected randomly from the entire population</li>
<li>Asking 1,000 citizens that respond to a poll posted on social media</li>
</ul></li>
<li>What is selection bias?
<ul>
<li>When the population characteristics that you want to estimate differ systematically across specific groups within the populatioon</li>
<li>When characteristics that make units more or less likely to provide data are correlated with the population characteristics that you want to estimate</li>
</ul></li>
</ul>
<div class="notes">
<p>Answers: - Option 1 - Option 2</p>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Content <i class="fa-brands fa-creative-commons" aria-label="creative-commons"></i> 2025 by <a href="https://jrspringman.github.io/">Jeremy Springman</a> <br> All content licensed under a <i class="fa-brands fa-creative-commons" aria-label="creative-commons"></i> <i class="fa-brands fa-creative-commons-by" aria-label="creative-commons-by"></i> <i class="fa-brands fa-creative-commons-nc" aria-label="creative-commons-nc"></i> <a href="https://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 International license (CC BY-NC 4.0)</a></div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">Made with <i class="fa-brands fa-r-project" aria-label="r-project"></i> and <a href="https://quarto.org/">Quarto</a><br> <a href="https://github.com/jrspringman/psci3200-globaldev">View the source at <i class="fa-brands fa-github" aria-label="github"></i> GitHub</a></div>
  </div>
</footer>



</body></html>